{"remainingRequest":"/Users/robin/Desktop/Heart-s-Journey/src/vue-web/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/robin/Desktop/Heart-s-Journey/src/vue-web/front/src/pages/exam/exam.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/robin/Desktop/Heart-s-Journey/src/vue-web/front/src/pages/exam/exam.vue","mtime":1746520048610},{"path":"/Users/robin/Desktop/Heart-s-Journey/src/vue-web/front/node_modules/cache-loader/dist/cjs.js","mtime":1746520046764},{"path":"/Users/robin/Desktop/Heart-s-Journey/src/vue-web/front/node_modules/babel-loader/lib/index.js","mtime":1746520046619},{"path":"/Users/robin/Desktop/Heart-s-Journey/src/vue-web/front/node_modules/cache-loader/dist/cjs.js","mtime":1746520046764},{"path":"/Users/robin/Desktop/Heart-s-Journey/src/vue-web/front/node_modules/vue-loader/lib/index.js","mtime":1746520048473}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoJZXhwb3J0IGRlZmF1bHQgew0KICAgIC8v5pWw5o2u6ZuG5ZCIDQoJCWRhdGEoKSB7DQoJCQlyZXR1cm4gew0KCQkJCXF1ZXN0aW9uTGlzdDogW10sDQoJCQkJaXNTdWJtaXQ6IGZhbHNlLA0KCQkJCWVuZDogZmFsc2UsDQoJCQkJbWF4dGltZTogMCwNCgkJCQl0aW1lcjogbnVsbCwNCgkJCQlob3VyOiAnJywNCgkJCQltaW51dGU6ICcnLA0KCQkJCXNlY29uZDogJycsDQoJCQkJdXNlcjoge30sDQoJCQkJaGFzc3ViamVjdDpmYWxzZSwNCgkJCQlwYXBlcjp7fSwNCgkJCQlkZXRlcm1pbmVGb3JtOiB7fSwNCgkJCQlkZXRlcm1pbmVMaXN0OiBbXSwNCgkJCX0NCgkJfSwNCgkJY3JlYXRlZCgpIHsNCgkJCXRoaXMuJGh0dHAuZ2V0KGBleGFtcGFwZXIvaW5mby8ke3RoaXMuJHJvdXRlLnF1ZXJ5LmlkfWAsIHt9KS50aGVuKHJlcyA9PiB7DQoJCQkJaWYgKHJlcy5kYXRhLmNvZGUgPT0gMCkgew0KCQkJCQl0aGlzLnBhcGVyID0gcmVzLmRhdGEuZGF0YQ0KCQkJCQl0aGlzLm1heHRpbWUgPSB0aGlzLnBhcGVyLnRpbWUgKiA2MDsNCgkJCQkJdGhpcy5kZWxldGVSZWNvcmRzKHRoaXMucGFwZXIuaWQpOw0KCQkJCQl0aGlzLmdldFF1ZXN0aW9uKHRoaXMucGFwZXIuaWQpOw0KCQkJCQl0aGlzLmhvdXIgPSBNYXRoLmZsb29yKHRoaXMubWF4dGltZSAvIDYwIC8gNjApOw0KCQkJCQl0aGlzLm1pbnV0ZSA9IE1hdGguZmxvb3IodGhpcy5tYXh0aW1lIC8gNjAgJSA2MCk7DQoJCQkJCXRoaXMuc2Vjb25kID0gTWF0aC5mbG9vcih0aGlzLm1heHRpbWUgJSA2MCk7DQoJCQkJCXRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCh0aGlzLmNvdW50RG93biwgMTAwMCk7DQoJCQkJCXRoaXMuJGh0dHAuZ2V0KCdzY29yZWRldGVybWluYXRpb24vbGlzdCcse3BhcmFtczoge3BhcGVyaWQ6IHRoaXMucGFwZXIuaWQscGFnZTogMSxsaW1pdCA6IDEwMCxzb3J0OiAnc2NvcmUnLG9yZGVyOidkZXNjJ319KS50aGVuKHJzPT57DQoJCQkJCQl0aGlzLmRldGVybWluZUxpc3QgPSBycy5kYXRhLmRhdGEubGlzdA0KCQkJCQl9KQ0KCQkJCX0NCgkJCX0pDQoJCQl0aGlzLiRodHRwLmdldChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnVXNlclRhYmxlTmFtZScpICsgJy9zZXNzaW9uJywgew0KCQkJCWVtdWxhdGVKU09OOiB0cnVlDQoJCQl9KS50aGVuKHJlcyA9PiB7DQoJCQkJaWYgKHJlcy5kYXRhLmNvZGUgPT0gMCkgew0KCQkJCQl0aGlzLnVzZXIgPSByZXMuZGF0YS5kYXRhOw0KCQkJCX0NCgkJCX0pOw0KCQl9LA0KCQkvL+aWueazlembhuWQiA0KCQltZXRob2RzOiB7DQoJCQlxdWVzdGlvblR5cGUoaXRlbSkgew0KCQkJCXN3aXRjaCAoaXRlbS50eXBlKSB7DQoJCQkJCWNhc2UgMDoNCgkJCQkJCXJldHVybiAn5a6i6KeC6aKYJzsNCgkJCQkJY2FzZSA0Og0KCQkJCQkJcmV0dXJuICfkuLvop4LpopgnOw0KCQkJCX0NCgkJCX0sDQoJCQlkZWxldGVSZWNvcmRzKHBhcGVyaWQpIHsNCgkJCQl0aGlzLiRodHRwLnBvc3QoYGV4YW1yZWNvcmQvZGVsZXRlUmVjb3Jkcz91c2VyaWQ9JHtsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZnJvbnRVc2VyaWQnKX0mcGFwZXJpZD0ke3BhcGVyaWR9YCkudGhlbihyZXMgPT4ge30pOw0KCQkJfSwNCgkJCWdldFF1ZXN0aW9uKHBhcGVyaWQpIHsNCgkJCQl0aGlzLiRodHRwLmdldCgnZXhhbXF1ZXN0aW9uL2xpc3QnLCB7cGFyYW1zOiB7cGFnZTogMSwgbGltaXQ6IDEwMDAsIHBhcGVyaWR9fSkudGhlbihyZXMgPT4gew0KCQkJCQlpZiAocmVzLmRhdGEuY29kZSA9PSAwKSB7DQoJCQkJCQlmb3IobGV0IHggaW4gcmVzLmRhdGEuZGF0YS5saXN0KXsNCgkJCQkJCQlyZXMuZGF0YS5kYXRhLmxpc3RbeF0ucXVlc3Rpb25uYW1lID0gcmVzLmRhdGEuZGF0YS5saXN0W3hdLnF1ZXN0aW9ubmFtZS5yZXBsYWNlKC9pbWcgc3JjL2dpLCJpbWcgc3R5bGU9XCJ3aWR0aDoxMDAlO1wiIHNyYyIpOw0KCQkJCQkJCWlmKHJlcy5kYXRhLmRhdGEubGlzdFt4XS50eXBlPT00KXsNCgkJCQkJCQkJdGhpcy5oYXNzdWJqZWN0ID0gdHJ1ZQ0KCQkJCQkJCX0NCgkJCQkJCX0NCgkJCQkJCXJlcy5kYXRhLmRhdGEubGlzdC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7DQoJCQkJCQkJcmV0dXJuIChiLnNlcXVlbmNlIC0gYS5zZXF1ZW5jZSkNCgkJCQkJCX0pOw0KCQkJCQkJdGhpcy5xdWVzdGlvbkxpc3QgPSByZXMuZGF0YS5kYXRhLmxpc3Q7DQoJCQkJCX0NCgkJCQl9KTsNCgkJCX0sDQoJCQlzdWJtaXRBbnN3ZXIoKSB7DQoJCQkJZm9yKGxldCBpIGluIHRoaXMucXVlc3Rpb25MaXN0KXsNCgkJCQkJaWYodGhpcy5xdWVzdGlvbkxpc3RbaV0udHlwZT09MSl7DQoJCQkJCQlpZighdGhpcy5xdWVzdGlvbkxpc3RbaV0ubXlhbnN3ZXJ8fCh0aGlzLnF1ZXN0aW9uTGlzdFtpXS5teWFuc3dlciYmdGhpcy5xdWVzdGlvbkxpc3RbaV0ubXlhbnN3ZXIubGVuZ3RoPT0wKSl7DQoJCQkJCQkJdGhpcy4kbWVzc2FnZS5lcnJvcign6L+Y5pyJ6K+V6aKY5pyq5a6M5oiQ5L2c562UJykNCgkJCQkJCQlyZXR1cm4gZmFsc2UNCgkJCQkJCX0NCgkJCQkJfWVsc2V7DQoJCQkJCQlpZighdGhpcy5xdWVzdGlvbkxpc3RbaV0ubXlhbnN3ZXJ8fCh0aGlzLnF1ZXN0aW9uTGlzdFtpXS5teWFuc3dlciYmdGhpcy5xdWVzdGlvbkxpc3RbaV0ubXlhbnN3ZXI9PScnKSl7DQoJCQkJCQkJdGhpcy4kbWVzc2FnZS5lcnJvcign6L+Y5pyJ6K+V6aKY5pyq5a6M5oiQ5L2c562UJykNCgkJCQkJCQlyZXR1cm4gZmFsc2UNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCX0NCgkJCQl0aGlzLiRjb25maXJtKGDmmK/lkKblrozmiJDkvZznrZTvvIzmj5DkuqTlv4PnkIbmtYvor4TvvJ9gLCAi5o+Q56S6Iiwgew0KCQkJCQljb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsDQoJCQkJCWNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLA0KCQkJCQl0eXBlOiAid2FybmluZyINCgkJCQl9KS50aGVuKCgpPT57DQoJCQkJCWZvciAobGV0IHggaW4gdGhpcy5xdWVzdGlvbkxpc3QpIHsNCgkJCQkJCWlmICh0aGlzLnF1ZXN0aW9uTGlzdFt4XS50eXBlICE9IDQpIHsNCgkJCQkJCQl0aGlzLnF1ZXN0aW9uTGlzdFt4XS5vcHRpb25MaXN0ID0gSlNPTi5wYXJzZSh0aGlzLnF1ZXN0aW9uTGlzdFt4XS5vcHRpb25zKQ0KCQkJCQkJCWZvcihsZXQgaSBpbiB0aGlzLnF1ZXN0aW9uTGlzdFt4XS5vcHRpb25MaXN0KXsNCgkJCQkJCQkJaWYodGhpcy5xdWVzdGlvbkxpc3RbeF0ubXlhbnN3ZXIgPT0gdGhpcy5xdWVzdGlvbkxpc3RbeF0ub3B0aW9uTGlzdFtpXS5jb2RlKXsNCgkJCQkJCQkJCXRoaXMucXVlc3Rpb25MaXN0W3hdLm15c2NvcmUgPSB0aGlzLnF1ZXN0aW9uTGlzdFt4XS5vcHRpb25MaXN0W2ldLnNjb3JlDQoJCQkJCQkJCX0NCgkJCQkJCQl9DQoJCQkJCQl9IGVsc2Ugew0KCQkJCQkJCXRoaXMucXVlc3Rpb25MaXN0W3hdLm15c2NvcmUgPSAwDQoJCQkJCQl9DQoJCQkJCQl0aGlzLnNhdmVyZWNvcmQodGhpcy5xdWVzdGlvbkxpc3RbeF0pDQoJCQkJCX0NCgkJCQkJdGhpcy5lbmQgPSB0cnVlOw0KCQkJCX0pDQoJCQl9LA0KCQkJc2NvcmVDaGFuZ2UoKSB7DQoJCQkJbGV0IHNjb3JlID0gMA0KCQkJCWZvciAobGV0IHggaW4gdGhpcy5xdWVzdGlvbkxpc3QpIHsNCgkJCQkJaWYgKHRoaXMucXVlc3Rpb25MaXN0W3hdLm15c2NvcmUpIHsNCgkJCQkJCXNjb3JlICs9IE51bWJlcih0aGlzLnF1ZXN0aW9uTGlzdFt4XS5teXNjb3JlKSB8fCAwDQoJCQkJCX0NCgkJCQl9DQoJCQkJZm9yKGxldCBpIGluIHRoaXMuZGV0ZXJtaW5lTGlzdCl7DQoJCQkJCWlmKHNjb3JlID49IHRoaXMuZGV0ZXJtaW5lTGlzdFtpXS5zY29yZSl7DQoJCQkJCQl0aGlzLmRldGVybWluZUZvcm0gPSB0aGlzLmRldGVybWluZUxpc3RbaV0NCgkJCQkJCWJyZWFrOw0KCQkJCQl9DQoJCQkJfQ0KCQkJCXJldHVybiBzY29yZQ0KCQkJfSwNCgkJCXNhdmVyZWNvcmQocm93KSB7DQoJCQkJbGV0IHJlY29yZCA9IHsNCgkJCQkJdXNlcmlkOiB0aGlzLnVzZXIuaWQsDQoJCQkJCXVzZXJuYW1lOiB0aGlzLnVzZXIueW9uZ2h1eGluZ21pbmcsDQoJCQkJCXBhcGVyaWQ6IHRoaXMucGFwZXIuaWQsDQoJCQkJCXBhcGVybmFtZTogdGhpcy5wYXBlci5uYW1lLA0KCQkJCQlxdWVzdGlvbmlkOiByb3cuaWQsDQoJCQkJCXF1ZXN0aW9ubmFtZTogcm93LnF1ZXN0aW9ubmFtZSwNCgkJCQkJb3B0aW9uczogcm93Lm9wdGlvbnMsDQoJCQkJCXNjb3JlOiByb3cuc2NvcmUsDQoJCQkJCWFuYWx5c2lzOiByb3cuYW5hbHlzaXMsDQoJCQkJCW15c2NvcmU6IHJvdy5teXNjb3JlLA0KCQkJCQlteWFuc3dlcjogcm93Lm15YW5zd2VyLA0KCQkJCQl0eXBlOiByb3cudHlwZSwNCgkJCQkJaXNtYXJrOiB0aGlzLmhhc3N1YmplY3QgPyAwIDogMQ0KCQkJCX0NCgkJCQl0aGlzLiRodHRwLnBvc3QoJ2V4YW1yZWNvcmQvYWRkJywgcmVjb3JkKS50aGVuKHJlcyA9PiB7fSkNCgkJCX0sDQoJCQlkb25lRXhhbSh0eXBlKSB7DQoJCQkJaWYgKHR5cGUgPT0gMCkgew0KCQkJCQl0aGlzLiRjb25maXJtKCfnoa7lrprnprvlvIDmtYvor5U/5pyq562U6aKY55uu5oyJMOWIhuiuoScsICfmj5DnpLonLCB7DQoJCQkJCQljb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQoJCQkJCQljYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCgkJCQkJCXR5cGU6ICd3YXJuaW5nJw0KCQkJCQl9KS50aGVuKCgpID0+IHsNCgkJCQkJCXRoaXMuZW5kID0gdHJ1ZTsNCgkJCQkJCWlmICh0aGlzLnF1ZXN0aW9uTGlzdC5sZW5ndGggPT0gMCkgew0KCQkJCQkJCXRoaXMuJHJvdXRlci5wdXNoKCcvaW5kZXgvZXhhbVBhcGVyJyk7DQoJCQkJCQl9DQoJCQkJCX0pOw0KCQkJCX0gZWxzZSB7DQoJCQkJCXRoaXMuJHJvdXRlci5wdXNoKCcvaW5kZXgvZXhhbVBhcGVyJyk7DQoJCQkJfQ0KCQkJfSwNCgkJCWNvdW50RG93bigpIHsNCgkJCQlpZiAodGhpcy5tYXh0aW1lID4gMCkgew0KCQkJCQl0aGlzLmhvdXIgPSBNYXRoLmZsb29yKCh0aGlzLm1heHRpbWUgLSAxKSAvIDYwIC8gNjApOw0KCQkJCQl0aGlzLm1pbnV0ZSA9IE1hdGguZmxvb3IoKHRoaXMubWF4dGltZSAtIDEpIC8gNjAgJSA2MCk7DQoJCQkJCXRoaXMuc2Vjb25kID0gTWF0aC5mbG9vcigodGhpcy5tYXh0aW1lIC0gMSkgJSA2MCk7DQoJCQkJCS0tdGhpcy5tYXh0aW1lOw0KCQkJCX0gZWxzZSB7DQoJCQkJCWNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7DQoJCQkJCXRoaXMuZW5kID0gdHJ1ZTsNCgkJCQl9DQoJCQl9DQoJCX0NCgl9DQo="},{"version":3,"sources":["exam.vue"],"names":[],"mappings":";AA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"exam.vue","sourceRoot":"src/pages/exam","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<div class=\"top-content\">\r\n\t\t\t<div class=\"top-content-left\">{{paper.name}} （ 共 <el-tag type=\"danger\">{{questionList.length}}</el-tag> 题 ）\r\n\t\t\t</div>\r\n\t\t\t<div class=\"top-content-center\" v-cloak>距离测试结束还有 <el-tag type=\"danger\">{{this.hour}}</el-tag> 时 <el-tag\r\n\t\t\t\t\ttype=\"danger\">{{this.minute}}</el-tag> 分 <el-tag type=\"danger\">{{this.second}}</el-tag> 秒</div>\r\n\t\t\t<div class=\"top-content-right\">\r\n\t\t\t\t<el-button type=\"danger\" @click=\"doneExam(0)\">结束测试</el-button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<el-card v-if=\"end\" style=\"width: 90%;margin: 10px auto;\">\r\n\t\t\t<div style=\"width: 100%;display: flex;flex-direction: column;align-items: center;\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div class=\"question-title\">测试成绩：<el-tag type=\"danger\">{{scoreChange()}}</el-tag> 分</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"question-title\">您的心理{{determineForm.determine}}</div>\r\n\t\t\t\t<div class=\"question-title\" style=\"width: 60%;\">分析：{{determineForm.analysis}}</div>\r\n\t\t\t\t<div class=\"question-btn\">\r\n\t\t\t\t\t<el-button v-if=\"!isSubmit\" type=\"primary\" @click=\"isSubmit=true\">查看解析</el-button>\r\n\t\t\t\t\t<el-button type=\"success\" @click=\"doneExam(1)\">结束测试</el-button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</el-card>\r\n\t\t<el-card style=\"width: 90%;margin: 10px auto;\" v-if=\"!end||isSubmit\">\r\n\t\t\t<div class=\"question-content\" v-for=\"(item, index) in questionList\" :key=\"item.id\">\r\n\t\t\t\t<div class=\"question-title\">\r\n\t\t\t\t\t{{index + 1}} 、{{item.type==4?`(${item.score}分)`:''}}：<span class=\"ql-snow ql-editor\" v-html=\"item.questionname\"></span>\r\n\t\t\t\t\t<el-tag type=\"success\" v-if=\"item.type==0\">{{questionType(item)}}</el-tag>\r\n\t\t\t\t\t<el-tag type=\"danger\" v-if=\"item.type==4\">{{questionType(item)}}</el-tag>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"question-answer\">\r\n\t\t\t\t\t<div v-if=\"!isSubmit && !end\">\r\n\t\t\t\t\t\t作答：\r\n\t\t\t\t\t\t<el-select v-model=\"item.myanswer\" placeholder=\"请选择您的答案\"\r\n\t\t\t\t\t\t\tv-if=\"item.type == 0 \">\r\n\t\t\t\t\t\t\t<el-option v-for=\"(option, idx) in JSON.parse(item.options)\" :key=\"idx\" :label=\"option.text\"\r\n\t\t\t\t\t\t\t\t:value=\"option.code\">\r\n\t\t\t\t\t\t\t</el-option>\r\n\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t<el-input style=\"width: 400px;\" v-if=\"item.type == 4\" v-model=\"item.myanswer\" type=\"textarea\"\r\n\t\t\t\t\t\t\tplaceholder=\"请输入答案\"></el-input>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div v-if=\"isSubmit\">\r\n\t\t\t\t\t\t<div class=\"question-title\">填写答案：\r\n\t\t\t\t\t\t\t{{item.myanswer}}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"question-title\">\r\n\t\t\t\t\t\t\t解析：{{item.answer?(item.answer + ','):''}} {{item.analysis}}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"question-btn\">\r\n\t\t\t\t<el-button v-if=\"!isSubmit && !end\" type=\"primary\" @click=\"submitAnswer\">提交答案</el-button>\r\n\t\t\t</div>\r\n\t\t</el-card>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n    //数据集合\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tquestionList: [],\r\n\t\t\t\tisSubmit: false,\r\n\t\t\t\tend: false,\r\n\t\t\t\tmaxtime: 0,\r\n\t\t\t\ttimer: null,\r\n\t\t\t\thour: '',\r\n\t\t\t\tminute: '',\r\n\t\t\t\tsecond: '',\r\n\t\t\t\tuser: {},\r\n\t\t\t\thassubject:false,\r\n\t\t\t\tpaper:{},\r\n\t\t\t\tdetermineForm: {},\r\n\t\t\t\tdetermineList: [],\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.$http.get(`exampaper/info/${this.$route.query.id}`, {}).then(res => {\r\n\t\t\t\tif (res.data.code == 0) {\r\n\t\t\t\t\tthis.paper = res.data.data\r\n\t\t\t\t\tthis.maxtime = this.paper.time * 60;\r\n\t\t\t\t\tthis.deleteRecords(this.paper.id);\r\n\t\t\t\t\tthis.getQuestion(this.paper.id);\r\n\t\t\t\t\tthis.hour = Math.floor(this.maxtime / 60 / 60);\r\n\t\t\t\t\tthis.minute = Math.floor(this.maxtime / 60 % 60);\r\n\t\t\t\t\tthis.second = Math.floor(this.maxtime % 60);\r\n\t\t\t\t\tthis.timer = setInterval(this.countDown, 1000);\r\n\t\t\t\t\tthis.$http.get('scoredetermination/list',{params: {paperid: this.paper.id,page: 1,limit : 100,sort: 'score',order:'desc'}}).then(rs=>{\r\n\t\t\t\t\t\tthis.determineList = rs.data.data.list\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tthis.$http.get(localStorage.getItem('UserTableName') + '/session', {\r\n\t\t\t\temulateJSON: true\r\n\t\t\t}).then(res => {\r\n\t\t\t\tif (res.data.code == 0) {\r\n\t\t\t\t\tthis.user = res.data.data;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//方法集合\r\n\t\tmethods: {\r\n\t\t\tquestionType(item) {\r\n\t\t\t\tswitch (item.type) {\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\treturn '客观题';\r\n\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\treturn '主观题';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdeleteRecords(paperid) {\r\n\t\t\t\tthis.$http.post(`examrecord/deleteRecords?userid=${localStorage.getItem('frontUserid')}&paperid=${paperid}`).then(res => {});\r\n\t\t\t},\r\n\t\t\tgetQuestion(paperid) {\r\n\t\t\t\tthis.$http.get('examquestion/list', {params: {page: 1, limit: 1000, paperid}}).then(res => {\r\n\t\t\t\t\tif (res.data.code == 0) {\r\n\t\t\t\t\t\tfor(let x in res.data.data.list){\r\n\t\t\t\t\t\t\tres.data.data.list[x].questionname = res.data.data.list[x].questionname.replace(/img src/gi,\"img style=\\\"width:100%;\\\" src\");\r\n\t\t\t\t\t\t\tif(res.data.data.list[x].type==4){\r\n\t\t\t\t\t\t\t\tthis.hassubject = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tres.data.data.list.sort(function (a, b) {\r\n\t\t\t\t\t\t\treturn (b.sequence - a.sequence)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.questionList = res.data.data.list;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsubmitAnswer() {\r\n\t\t\t\tfor(let i in this.questionList){\r\n\t\t\t\t\tif(this.questionList[i].type==1){\r\n\t\t\t\t\t\tif(!this.questionList[i].myanswer||(this.questionList[i].myanswer&&this.questionList[i].myanswer.length==0)){\r\n\t\t\t\t\t\t\tthis.$message.error('还有试题未完成作答')\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(!this.questionList[i].myanswer||(this.questionList[i].myanswer&&this.questionList[i].myanswer=='')){\r\n\t\t\t\t\t\t\tthis.$message.error('还有试题未完成作答')\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.$confirm(`是否完成作答，提交心理测评？`, \"提示\", {\r\n\t\t\t\t\tconfirmButtonText: \"确定\",\r\n\t\t\t\t\tcancelButtonText: \"取消\",\r\n\t\t\t\t\ttype: \"warning\"\r\n\t\t\t\t}).then(()=>{\r\n\t\t\t\t\tfor (let x in this.questionList) {\r\n\t\t\t\t\t\tif (this.questionList[x].type != 4) {\r\n\t\t\t\t\t\t\tthis.questionList[x].optionList = JSON.parse(this.questionList[x].options)\r\n\t\t\t\t\t\t\tfor(let i in this.questionList[x].optionList){\r\n\t\t\t\t\t\t\t\tif(this.questionList[x].myanswer == this.questionList[x].optionList[i].code){\r\n\t\t\t\t\t\t\t\t\tthis.questionList[x].myscore = this.questionList[x].optionList[i].score\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.questionList[x].myscore = 0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.saverecord(this.questionList[x])\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.end = true;\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tscoreChange() {\r\n\t\t\t\tlet score = 0\r\n\t\t\t\tfor (let x in this.questionList) {\r\n\t\t\t\t\tif (this.questionList[x].myscore) {\r\n\t\t\t\t\t\tscore += Number(this.questionList[x].myscore) || 0\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor(let i in this.determineList){\r\n\t\t\t\t\tif(score >= this.determineList[i].score){\r\n\t\t\t\t\t\tthis.determineForm = this.determineList[i]\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn score\r\n\t\t\t},\r\n\t\t\tsaverecord(row) {\r\n\t\t\t\tlet record = {\r\n\t\t\t\t\tuserid: this.user.id,\r\n\t\t\t\t\tusername: this.user.yonghuxingming,\r\n\t\t\t\t\tpaperid: this.paper.id,\r\n\t\t\t\t\tpapername: this.paper.name,\r\n\t\t\t\t\tquestionid: row.id,\r\n\t\t\t\t\tquestionname: row.questionname,\r\n\t\t\t\t\toptions: row.options,\r\n\t\t\t\t\tscore: row.score,\r\n\t\t\t\t\tanalysis: row.analysis,\r\n\t\t\t\t\tmyscore: row.myscore,\r\n\t\t\t\t\tmyanswer: row.myanswer,\r\n\t\t\t\t\ttype: row.type,\r\n\t\t\t\t\tismark: this.hassubject ? 0 : 1\r\n\t\t\t\t}\r\n\t\t\t\tthis.$http.post('examrecord/add', record).then(res => {})\r\n\t\t\t},\r\n\t\t\tdoneExam(type) {\r\n\t\t\t\tif (type == 0) {\r\n\t\t\t\t\tthis.$confirm('确定离开测试?未答题目按0分计', '提示', {\r\n\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t}).then(() => {\r\n\t\t\t\t\t\tthis.end = true;\r\n\t\t\t\t\t\tif (this.questionList.length == 0) {\r\n\t\t\t\t\t\t\tthis.$router.push('/index/examPaper');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$router.push('/index/examPaper');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcountDown() {\r\n\t\t\t\tif (this.maxtime > 0) {\r\n\t\t\t\t\tthis.hour = Math.floor((this.maxtime - 1) / 60 / 60);\r\n\t\t\t\t\tthis.minute = Math.floor((this.maxtime - 1) / 60 % 60);\r\n\t\t\t\t\tthis.second = Math.floor((this.maxtime - 1) % 60);\r\n\t\t\t\t\t--this.maxtime;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclearInterval(this.timer);\r\n\t\t\t\t\tthis.end = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\r\n\t.top-content {\r\n\t\theight: 80px;\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #409EFF;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\t.top-content-left, .top-content-center, .top-content-right {\r\n\t\tfont-size: 18px;\r\n\t\tline-height: 80px;\r\n\t\tcolor: #fff;\r\n\t}\r\n\t.top-content-left {\r\n\t\tpadding-left: 20px;\r\n\t}\r\n\t.top-content-right {\r\n\t\tpadding-right: 20px;\r\n\t}\r\n\t.question-content {\r\n\t\twidth: 90%;\r\n\t\tmargin: 0 auto;\r\n\t\tmargin-top: 30px;\r\n\t\tborder-bottom: 1px solid #eee;\r\n\t}\r\n\t.question-content:last-of-type {\r\n\t\tborder: none;\r\n\t}\r\n\t.question-title, .question-answer, .question-btn {\r\n\t\tpadding: 20px 0;\r\n\t}\r\n</style>\r\n"]}]}